// Input 0
/*

 uDeferred library

 @author David Mzareulyan
 @copyright 2011 David Mzareulyan
 @license http://creativecommons.org/licenses/by/3.0/
*/
(function(){var a=function(){return this}(),f;f=typeof a.jQuery!=="undefined"&&typeof a.jQuery.Deferred!=="undefined"?a.Deferred=a.jQuery.Deferred:a.Deferred=function(){if(!(this instanceof arguments.callee))return new f;var h=[0,[],[]],a=0,n,e=null,k,r=this,o=function(m,e,k){if(!a){a=m;n=e;for(m=h[m];m.length;)m.shift().apply(k,n);h=null;return r}},i=function(m,e){a==m?e.apply(this,n):a||h[m].push(e);return this};r.promise=function(m){if(!m&&e)return e;e=m?m:e?e:{};for(var a in k)k.hasOwnProperty(a)&&
(e[a]=k[a]);return e};r.resolve=function(){return o(1,arguments,e)};r.reject=function(){return o(2,arguments,e)};r.resolveWith=function(){var a=arguments.shift();return o(1,arguments,a)};r.rejectWith=function(){var a=arguments.shift();return o(2,arguments,a)};k={done:function(a){return i.call(this,1,a)},fail:function(a){return i.call(this,2,a)},then:function(a,e){return this.done(a).fail(e)},always:function(a){return this.then(a,a)},isResolved:function(){return a==1},isRejected:function(){return a==
2},promise:function(){return this}}};var i=function(a,f){return function(){return a.apply(f,arguments)}};f.pipeline=function(){var a,p=arguments,n,e=function(){if(n.length){var k=n.shift().apply(null,arguments);typeof k.promise=="function"?k.promise().then(e,i(a.reject,a)):e.apply(null,[k])}else a.resolve.apply(a,arguments)};return function(){a=new f;n=Array.prototype.slice.call(arguments);e.apply(null,p);return a.promise()}}})();
// Input 1
/*

 CRC32

 @author David Mzareulyan
 @copyright 2011 David Mzareulyan
 @license http://creativecommons.org/licenses/by/3.0/
*/
(function(){for(var a=function(){return this}(),f=Array(256),i=0;i<256;i++){for(var h=i,p=0;p<8;p++)h=h&1?3988292384^h>>>1:h>>>1;f[i]=h}a.crc32=function(a){for(var e=-1,h=0,i=a.length;h<i;h++)e=e>>>8^f[(e^a.charCodeAt(h))&255];return e^-1}})();
// Input 2
/*

 APNG-canvas

 @author David Mzareulyan
 @copyright 2011 David Mzareulyan
 @link https://github.com/davidmz/apng-canvas
 @license https://github.com/davidmz/apng-canvas/blob/master/LICENSE (MIT License)
*/
(function(){var a=function(){return this}(),f=a.jQuery||null,i=!!document.getCSSCanvasContext,h=a.APNG={},p=null;h.checkNativeFeatures=function(b){var d=!p,c=d?p=new Deferred:p;b&&c.promise().done(b);if(!d)return c.promise();var a={canvas:!1,apng:!1},e=document.createElement("canvas");if(typeof e.getContext=="undefined")c.resolve(a);else{a.canvas=!0;var g=new Image;g.onload=function(){var b=e.getContext("2d");b.drawImage(g,0,0);if(b.getImageData(0,0,1,1).data[3]===0)a.apng=!0;c.resolve(a)};g.src=
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACGFjVEwAAAABAAAAAcMq2TYAAAANSURBVAiZY2BgYPgPAAEEAQB9ssjfAAAAGmZjVEwAAAAAAAAAAQAAAAEAAAAAAAAAAAD6A+gBAbNU+2sAAAARZmRBVAAAAAEImWNgYGBgAAAABQAB6MzFdgAAAABJRU5ErkJggg=="}return c.promise()};var n=null;h.ifNeeded=function(b){var a=!n,c=a?n=new Deferred:n;b&&c.promise().done(b);if(!a)return c.promise();if(location.protocol!="http:"&&location.protocol!="https:")return c.reject("apng-canvas doesn't work on pages loaded by '"+location.protocol+
"' protocol"),c.promise();this.checkNativeFeatures().done(function(b){b.canvas&&!b.apng?c.resolve():(b.canvas||c.reject("Browser doesn't support canvas"),b.apng&&c.reject("Browser has native APNG support"))}).done(function(){c.reject()});return c.promise()};h.createAPNGCanvas=function(b,a){var c=new Deferred;a&&c.promise().done(a);s.createFromUrl(b).done(function(){c.resolve(this.addCanvas())}).fail(u(c.reject,c));return c.promise()};h.animateImage=function(b){if(i){var d=new Deferred;b.hasAttribute("data-apng-src")?
d.reject("Image already animated"):s.createFromUrl(b.src).done(function(){var c=this.getCSSCanvasContextName();if(!b.hasAttribute("width")&&!b.style.width)b.style.width=a.getComputedStyle(b).width;if(!b.hasAttribute("height")&&!b.style.height)b.style.height=a.getComputedStyle(b).height;b.setAttribute("data-apng-src",b.src);b.src=k;b.style.backgroundImage="-webkit-canvas("+c+")";b.style.backgroundSize="100% 100%";d.resolve()}).fail(u(d.reject,d));return d.promise()}else return this.replaceImage(b)};
h.replaceImage=function(b){if(b.hasAttribute("data-apng-src")){var a=new Deferred;a.reject("Image already animated");return a.promise()}else return h.createAPNGCanvas(b.src).done(function(a){for(var d=0;d<b.attributes.length;d++){var e=b.attributes[d];["alt","src","usemap","ismap"].indexOf(e.nodeName)==-1&&a.setAttributeNode(e.cloneNode());b.setAttribute("data-apng-src",b.src)}if(f&&(d=f(b).data("events")))for(var g in d)for(var e=0,h=d[g].length;e<h;e++){var v=d[g][e];f(a).bind(g+(v.namespace?".":
"")+v.namespace,v.data,v.handler)}g=b.parentNode;g.insertBefore(a,b);g.removeChild(b)})};var e=String.fromCharCode(137,80,78,71,13,10,26,10),k="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",r=1,o=function(b){for(var a=0,c=0;c<4;c++)a+=b.charCodeAt(c)<<(3-c)*8;return a},B=function(b){for(var a=0,c=0;c<2;c++)a+=b.charCodeAt(c)<<(1-c)*8;return a},m=function(b,a){var c="";c+=t(a.length);c+=b;c+=a;c+=t(crc32(b+a));return c},t=function(b){return String.fromCharCode(b>>
24&255,b>>16&255,b>>8&255,b&255)},y=function(){this.parts=[]};y.prototype.append=function(b){this.parts.push(b)};y.prototype.getUrl=function(b){return a.btoa?"data:"+b+";base64,"+btoa(this.parts.join("")):"data:"+b+","+escape(this.parts.join(""))};var u=function(b,a){return function(){return b.apply(a,arguments)}};typeof XMLHttpRequest.prototype.responseBody!="undefined"&&typeof document.addEventListener!="undefined"&&document.addEventListener("DOMContentLoaded",function(){var a=document.createElement("script");
a.setAttribute("type","text/vbscript");a.text="Function APNGIEBinaryToBinStr(Binary)\r\n   APNGIEBinaryToBinStr = CStr(Binary)\r\nEnd Function\r\n";document.body.appendChild(a)});var w=[];(function(){if(w.length)for(var a=w.splice(0,w.length),d=(new Date).getTime();a.length;)a.shift().call(null,d);setTimeout(arguments.callee,1E3/60)})();var x=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||function(a){w.push(a)},C=function(a){for(var d=
0;d<z.length;d++)for(var c=z[d];c.isActive&&c.nextRenderTime<=a;)c.renderFrame(a);x(C)};x(C);var s=function(){var a=this;this.isActive=!1;this.numPlays=this.height=this.width=this.nextRenderTime=0;this.frames=[];this.playTime=0;var d=new Deferred;this.whenReady=u(d.promise,d);this.parsePNGData=function(c){if(c.substr(0,8)!=e)return d.reject("Invalid PNG file signature"),d.promise();var g,D="",h="",i=!1,l=8,j=null;do{var f=o(c.substr(l,4)),k=c.substr(l+4,4),q;switch(k){case "IHDR":g=q=c.substr(l+8,
f);this.width=o(q.substr(0,4));this.height=o(q.substr(4,4));break;case "acTL":i=!0;this.numPlays=o(c.substr(l+8+4,4));break;case "fcTL":j&&this.frames.push(j);q=c.substr(l+8,f);j={};j.width=o(q.substr(4,4));j.height=o(q.substr(8,4));j.left=o(q.substr(12,4));j.top=o(q.substr(16,4));var n=B(q.substr(20,2)),p=B(q.substr(22,2));p==0&&(p=100);j.delay=1E3*n/p;this.playTime+=j.delay;j.disposeOp=q.charCodeAt(24);j.blendOp=q.charCodeAt(25);j.dataParts=[];break;case "fdAT":j&&j.dataParts.push(c.substr(l+8+
4,f-4));break;case "IDAT":j&&j.dataParts.push(c.substr(l+8,f));break;case "IEND":h=c.substr(l,f+12);break;default:D+=c.substr(l,f+12)}l+=12+f}while(k!="IEND"&&l<c.length);j&&this.frames.push(j);if(!i)return d.reject("Non-animated PNG"),d.promise();for(var r=0,s=this,c=0;c<this.frames.length;c++){i=new Image;j=this.frames[c];j.img=i;i.onload=function(){r++;r==s.frames.length&&d.resolveWith(a)};i.onerror=function(){d.reject("Image creation error")};l=new y;l.append(e);g=t(j.width)+t(j.height)+g.substr(8);
l.append(m("IHDR",g));l.append(D);for(f=0;f<j.dataParts.length;f++)l.append(m("IDAT",j.dataParts[f]));l.append(h);i.src=l.getUrl("image/png");delete j.dataParts}return d.promise()};var c=[];this.addCanvas=function(){var a=document.createElement("canvas");a.width=this.width;a.height=this.height;var b=a.getContext("2d");c.push(b);c.length>1&&x(function(){b.putImageData(c[0].getImageData(0,0,a.width,a.height),0,0)});this.isActive=!0;return a};var h=null;this.getCSSCanvasContextName=function(){if(!h){h=
"apng-canvas-css-"+r++;var d=document.getCSSCanvasContext("2d",h,this.width,this.height);c.push(d);c.length>1&&x(function(){d.putImageData(c[0].getImageData(0,0,a.width,a.height),0,0)});this.isActive=!0}return h};var f=0,g=null,i=function(a,b){for(var d=0;d<c.length;d++)c[d][a].apply(c[d],b)};this.renderFrame=function(a){if(c.length!=0){var b=f++%this.frames.length,d=this.frames[b];if(b==0&&(i("clearRect",[0,0,this.width,this.height]),g=null,d.disposeOp==2))d.disposeOp=1;g&&g.disposeOp==1?i("clearRect",
[g.left,g.top,g.width,g.height]):g&&g.disposeOp==2&&i("putImageData",[g.iData,g.left,g.top]);g=d;g.iData=null;if(g.disposeOp==2)g.iData=c[0].getImageData(d.left,d.top,d.width,d.height);d.blendOp==0&&i("clearRect",[d.left,d.top,d.width,d.height]);i("drawImage",[d.img,d.left,d.top]);if(this.numPlays==0||f/this.frames.length<this.numPlays){if(this.nextRenderTime==0)this.nextRenderTime=a;for(;a>this.nextRenderTime+this.playTime;)this.nextRenderTime+=this.playTime;this.nextRenderTime+=d.delay}else this.isActive=
!1}}},E=function(b){var d=new Deferred,c=new XMLHttpRequest,e=a.BlobBuilder||a.WebKitBlobBuilder,h=typeof c.responseBody!="undefined",g=typeof c.responseType!="undefined"&&typeof e!="undefined",f=typeof c.overrideMimeType!="undefined"&&!g;c.open("GET",b,!0);g?c.responseType="arraybuffer":f&&c.overrideMimeType("text/plain; charset=x-user-defined");c.onreadystatechange=function(){if(this.readyState==4&&this.status==200)if(g){var a=new e;a.append(this.response);var b=new FileReader;b.onload=function(){d.resolve(this.result)};
b.readAsBinaryString(a.getBlob())}else{a="";if(h)for(var b=APNGIEBinaryToBinStr(this.responseBody),f=0,i=b.length;f<i;f++){var k=b.charCodeAt(f);a+=String.fromCharCode(k&255,k>>8&255)}else{b=this.responseText;f=0;for(i=b.length;f<i;++f)a+=String.fromCharCode(b.charCodeAt(f)&255)}d.resolve(a)}else this.readyState==4&&d.reject(c)};c.send();return d.promise()},z=[],A={};s.createFromUrl=function(a){var d;a in A?d=A[a]:(d=new s,A[a]=d,z.push(d),Deferred.pipeline(a)(E,u(d.parsePNGData,d)));return d.whenReady()}})();
